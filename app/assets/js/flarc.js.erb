// Place your application-specific JavaScript functions and classes here
// This file is automatically included by javascript_include_tag :defaults

//= require jquery
//= require jquery.spinner
//= require twitter/bootstrap
//= require flarc/defaults
//= require jquery-ui-1.8.18.custom.min.js
//= require_self

function logout()
{
  $.ajax({
    url: '<%= Rails.application.routes.url_helpers.ygg_session_logout_path %>',
    dataType: 'json',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({}),
    success: function(data) {
      window.location = '/';
    },
  });
}

$.fn.selectOptions = function(value, clear)
{
  var v = value;
  var vT = typeof(value);

  // handle arrays
  if(vT == "object" && v.constructor == Array)
  {
    var $this = this;
    $.each(v, function()
     {
      $this.selectOptions(this, clear);
     }
    );
  };

  var c = clear || false;
  // has to be a string or regular expression (object in IE, function in Firefox)
  if(vT != "string" && vT != "function" && vT != "object") return this;
  this.each(function() {
    if(this.nodeName.toLowerCase() != "select") return this;
    // get options
    var o = this.options;
    // get number of options
    var oL = o.length;

    for(var i = 0; i<oL; i++) {
      if(v.constructor == RegExp) {
        if(o[i].value.match(v))
          o[i].selected = true;
        else if(c)
          o[i].selected = false;
      } else {
        if(o[i].value == v)
          o[i].selected = true;
        else if(c)
          o[i].selected = false;
      }
    }
  });
  return this;
};
