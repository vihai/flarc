<% if !@flights.empty? then %>
  <table class="standard flights">
    <tr>
      <th></th>
      <% if !options[:hide_pilot] %>
        <th>Pilota</th>
      <% end %>

      <th>Decollo</th>
      <th>Durata</th>

      <% if !options[:hide_plane] %>
        <th>Aliante</th>
      <% end %>

      <th>Punti</th>
    </tr>
    <% for x in @flights do %>
    <tr>
      <td class="view">
        <%= link_to(image_tag('view.png', :alt => 'View', :title => 'Apri la pagina del volo'), x) %>
      </td>
      <% if !options[:hide_pilot] %>
        <td class="pilot">
          <%= link_to(x.pilot.person.name, x.pilot) %>
        </td>
      <% end %>
      <td class="takoff">
        <%= link_to(l(x.takeoff_time, :format => :compact), x) %>
      </td>
      <td class="duration">
        <%=h fmt_duration(x.duration) %>
      </td>
      <% if !options[:hide_plane] %>
        <td class="glider">
          <%= link_to(x.plane.registration, x.plane) %>
          (<%= link_to(x.plane.plane_type.name, x.plane.plane_type) -%><%=h x.plane_type_configuration ? (' ' + x.plane_type_configuration.name) : '' -%>)
        </td>
      <% end %>
      <td class="points">
        <%= fmt_points(x.points) %>
      </td>
      <td class="rankings">
        <% x.ranking_flights.all(
              :conditions => 'status IS NOT NULL AND status != \'\'').
              each do |ranking| %>
          <%= image_tag ranking.ranking.icon,
                        :alt => "Icona #{ranking.ranking.name}",
                        :title => "#{ranking.ranking.name} (#{ranking.status})",
                        :class => "ranking_icon_#{ranking.status}" %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </table>
<% end %>
