<%
  configs = []

  if @flight.plane
    configs = PlaneTypeConfiguration.all(
      :conditions => { :plane_type_id =>
                          @flight.plane.plane_type_id },
      :order => 'name ASC').collect { |p| [ p.name, p.id ] }
  end
%>
<%= fields_for @flight do |f| %>
  <% if configs.empty? %>
    <%= f.hidden_field :plane_type_configuration_id, :value => nil %>
  <% else %>
    <%= f.select :plane_type_configuration_id, configs %>
  <% end %>
<% end %>
